# Livibank App 生產問題分類表

**適用對象：** Livibank App 技術團隊  
**文件負責人：** Tech Lead  
**最後更新：** 2025-02-05

---

## 一、問題嚴重程度定義

| 等級 | 代碼 | 名稱 | 定義 | 業務影響 |
|------|------|------|------|----------|
| P0 | Critical | 重大 | 服務完全不可用或核心功能全掛 | 全用戶無法使用、合規/資安事件 |
| P1 | High | 高 | 核心功能嚴重受損，多數用戶受影響 | 大量客訴、營收/交易受影響 |
| P2 | Medium | 中 | 部分功能異常或特定情境失敗 | 部分用戶受影響、可繞道使用 |
| P3 | Low | 低 | 輕微問題、非核心功能、影響少數用戶 | 體驗下降、可延後處理 |

---

## 二、生產問題分類表

### 2.1 依問題類型分類

| 分類代碼 | 問題類型 | 說明 | 常見觸發情境 | 預設嚴重度 |
|----------|----------|------|----------------|------------|
| **AUTH** | 認證／登入 | 登入失敗、Token 失效、OAuth/Google 登入異常 | 後端認證服務掛掉、憑證過期、第三方 IdP 故障 | P0–P1 |
| **API** | 後端／API | API 超時、5xx、連線失敗、回應錯誤 | Supabase/後端當機、網路問題、限流 | P0–P2 |
| **DATA** | 資料異常 | 資料遺失、錯亂、同步失敗、顯示錯誤 | DB 問題、遷移錯誤、快取不一致 | P0–P2 |
| **BUILD** | 建置／發布 | CI/CD 失敗、TestFlight/App Store 上架失敗 | 憑證過期、Secrets 錯誤、Apple 審核問題 | P1–P2 |
| **PERF** | 效能 | 啟動慢、卡頓、記憶體/電量異常 | 依賴服務變慢、資源洩漏、大資料量 | P2–P3 |
| **UI/UX** | 介面／體驗 | 畫面錯位、閃退、按鈕無反應、深層連結失效 | 特定機型/OS、Deep link 設定錯誤 | P2–P3 |
| **SEC** | 資安／合規 | 資料外洩、未授權存取、憑證/金鑰暴露 | 設定錯誤、依賴漏洞、人為疏失 | P0 |
| **INT** | 第三方整合 | 支付、推播、分析等第三方服務異常 | 第三方 API 變更或故障 | P1–P3 |

### 2.2 依影響範圍分類

| 影響範圍 | 說明 | 對應 R&R |
|----------|------|----------|
| 全站／全用戶 | 所有用戶或主要功能不可用 | Tech Lead 主責，必要時升級管理層 |
| 部分功能／部分用戶 | 特定功能或用戶群受影響 | 當值工程師 + Tech Lead 協調 |
| 單一用戶／單一情境 | 個案、可重現或難以重現 | 當值工程師處理，Tech Lead 覆核 |

---

## 三、處理方法（依嚴重度）

### P0 – 重大

| 步驟 | 動作 | 負責角色 | 時限 |
|------|------|----------|------|
| 1 | 立即確認現象並公告（內部群組／狀態頁） | Incident Commander | 5 分鐘內 |
| 2 | 成立戰情、指定 Incident Commander | Tech Lead | 10 分鐘內 |
| 3 | 優先止血：降級、關功能、回滾或緊急修補 | 當值工程師 + Tech Lead | 依狀況 |
| 4 | 持續更新狀態、記錄決策與時間線 | Incident Commander | 全程 |
| 5 | 問題緩解後進行根因分析（RCA） | Tech Lead 指定 | 24–48 小時內 |
| 6 | 撰寫事後報告、訂改進措施與追蹤 | Tech Lead | 72 小時內 |

### P1 – 高

| 步驟 | 動作 | 負責角色 | 時限 |
|------|------|----------|------|
| 1 | 確認影響範圍與可繞道方案 | 當值工程師 | 15 分鐘內 |
| 2 | 通報 Tech Lead，必要時啟動戰情 | 當值工程師 | 20 分鐘內 |
| 3 | 修復或暫時緩解（功能開關、降級） | 當值工程師 / Tech Lead | 依 SLA |
| 4 | 記錄時間線與變更 | 當值工程師 | 處理中 |
| 5 | 事後簡易 RCA 或改為 Ticket 追蹤 | Tech Lead 決定 | 一週內 |

### P2 – 中

| 步驟 | 動作 | 負責角色 | 時限 |
|------|------|----------|------|
| 1 | 建立工單、標記嚴重度與分類 | 當值工程師 | 當班內 |
| 2 | 評估是否需即時修復或排入 Sprint | Tech Lead / 當值工程師 | 1 工作日內 |
| 3 | 若有暫時解法，記錄並通知相關人 | 當值工程師 | 依需要 |
| 4 | 修復納入一般開發流程 | 負責開發者 | 依排程 |

### P3 – 低

| 步驟 | 動作 | 負責角色 | 時限 |
|------|------|----------|------|
| 1 | 建立工單、標記類型與嚴重度 | 任何人 | 發現時 |
| 2 | 排入 Backlog，依優先序處理 | Tech Lead / PM | 定期規劃 |
| 3 | 可合併類似問題一併處理 | 開發者 | 依排程 |

---

## 四、R&R（角色與職責）

### 4.1 角色定義

| 角色 | 定義 | 人選 |
|------|------|------|
| **Tech Lead** | 技術決策、資源調度、對外技術窗口、RCA 與改進負責人 | （現任 Tech Lead） |
| **Incident Commander** | P0/P1 事件期間之單一指揮、時間線與溝通協調 | 由 Tech Lead 指定（可為 Tech Lead 本人） |
| **當值工程師** | 值班時段第一線接收告警與客訴、初步排查與執行修復 | 依值班表 |
| **開發者** | 負責特定模組修復、配合戰情提供資訊與改版 | 依模組分工 |

### 4.2 依問題類型之 R&R 矩陣

| 問題類型 | 第一回應 | 技術主責 | 升級對象 | 對外說明（若需要） |
|----------|----------|----------|----------|----------------------|
| AUTH | 當值工程師 | Tech Lead / 後端負責人 | Tech Lead → 管理層 | Tech Lead 或指定人 |
| API | 當值工程師 | Tech Lead / 後端負責人 | Tech Lead | Tech Lead 或指定人 |
| DATA | 當值工程師 | Tech Lead / 資料或後端負責人 | Tech Lead | Tech Lead 或指定人 |
| BUILD | 當值工程師 / CI 負責人 | Tech Lead | Tech Lead | Tech Lead |
| PERF | 當值工程師 | 負責該模組之開發者 + Tech Lead | Tech Lead | Tech Lead 或指定人 |
| UI/UX | 當值工程師 | 前端／App 負責人 | Tech Lead | Tech Lead 或指定人 |
| SEC | 當值工程師（僅限收斂與通報） | Tech Lead | Tech Lead → 管理層 + 資安 | 依公司資安/公關政策 |
| INT | 當值工程師 | Tech Lead 或整合負責人 | Tech Lead | Tech Lead 或指定人 |

### 4.3 升級路徑

```
當值工程師 → Tech Lead → 管理層 / 資安 / 公關（依公司政策）
```

- **何時升級至 Tech Lead：** 所有 P0、P1；P2 若涉及範圍擴大或需跨團隊資源。
- **何時升級至管理層：** P0 持續超過約定時限、合規/資安事件、需對外聲明或客戶高層溝通時。

---

## 五、聯絡與工具（請依實際補齊）

| 用途 | 工具／方式 |
|------|-------------|
| 即時通報／戰情 | （例：Slack #livibank-incidents、Teams 群組） |
| 狀態頁／對外公告 | （例：status.livibank.com 或內部公告欄） |
| 工單與事後追蹤 | （例：Jira、Linear、GitHub Issues） |
| 監控與告警 | （例：Supabase Dashboard、Sentry、Firebase Crashlytics） |
| 值班表 | （例：PagerDuty、值班日曆、On-call 輪值表） |

---

## 六、附錄：快速對照表

| 若你遇到… | 分類 | 建議嚴重度 | 第一步 |
|------------|------|------------|--------|
| 所有人都無法登入 | AUTH | P0 | 通報 Tech Lead、查後端/IdP 狀態 |
| API 大量 5xx | API | P0–P1 | 查 Supabase/後端、必要時公告 |
| 資料錯亂或遺失 | DATA | P0–P1 | 停止相關寫入、通報 Tech Lead |
| TestFlight 建置失敗 | BUILD | P1–P2 | 查憑證/Secrets、見 START_HERE / .github |
| App 閃退率突然升高 | UI/UX / 依賴 | P1–P2 | 查 Sentry/Crashlytics、最近發布 |
| 金鑰或憑證可能外洩 | SEC | P0 | 立即通報 Tech Lead 與資安、不先對外 |
| 第三方支付／推播異常 | INT | P1–P2 | 查第三方狀態頁、降級或關閉功能 |

---

*本表由 Livibank App Tech Lead 維護，請隨團隊與流程變動更新。*
